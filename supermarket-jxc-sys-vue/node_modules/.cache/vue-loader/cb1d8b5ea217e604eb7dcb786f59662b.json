{"remainingRequest":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&scoped=true&lang=css","dependencies":[{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue","mtime":1718599544311},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1716113548474},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1716113543792},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1716113545439},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716113548707},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1716113543526}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoubG9naW4tYmFja2dyb3VuZCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGhlaWdodDogMTAwdmg7DQogICAgLyogYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzQ5OTVkNyAxMDAlKTsgKi8NCiAgICBiYWNrZ3JvdW5kOiB1cmwoJy4uL3ZpZXdzL2xvZ2luX2JnLnBuZycpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyOw0KICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7DQp9DQoNCi5sb2dpbi1jYXJkIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXgtd2lkdGg6IDM2MHB4Ow0KICAgIHBhZGRpbmc6IDQwcHg7DQogICAgYm94LXNoYWRvdzogMCAycHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4xKTsNCn0NCg0KLnRpdGxlIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICBjb2xvcjogIzMzMzsNCn0NCg0KLmZ1bGwtd2lkdGggew0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KLmlucHV0LWZpZWxkIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCi5yZWdpc3Rlci1saW5rIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgZGlzcGxheTogYmxvY2s7DQogICAgY29sb3I6ICMzMzM7DQp9DQo="},{"version":3,"sources":["D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue"],"names":[],"mappings":"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","file":"D:/project - 副本/supermarket-jxc-sys-vue/src/views/Login.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <div class=\"login-background\">\r\n        \r\n        <el-card class=\"login-card\">\r\n            <h2 class=\"title\">登录到您的账户</h2>\r\n            <el-form ref=\"form\" :model=\"loginForm\" @submit.prevent=\"handleLogin\">\r\n                <el-form-item label=\"用户名\" prop=\"username\" label-width=\"\">\r\n                    <el-input v-model=\"loginForm.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input v-model=\"loginForm.password\" type=\"password\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"角色\">\r\n\r\n                    <el-radio-group v-model=\"loginForm.roleId\" class=\"ml-4\">\r\n                        <el-radio :value=\"1\" size=\"large\">管理员</el-radio>\r\n                        <el-radio :value=\"0\" size=\"large\">员工</el-radio>\r\n                    </el-radio-group>\r\n\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button class=\"full-width\" type=\"primary\" @click=\"handleLogin\"\r\n                    >登录\r\n                    </el-button\r\n                    >\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from \"vue\";\r\nimport {useRouter} from \"vue-router\";\r\nimport {getCaptchaNbr, login} from \"@/api/user\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport {useStore} from \"vuex\";\r\n\r\nconst store = useStore();\r\nconst code = ref(\"\");\r\n\r\nasync function init() {\r\n    const {data} = await getCaptchaNbr();\r\n    code.value = data;\r\n}\r\n\r\ninit();\r\nconst router = useRouter();\r\nconst form = ref();\r\nconst loginForm = ref({\r\n    username: \"\",\r\n    password: \"\",\r\n    roleId: 1,\r\n});\r\nconst handleLogin = async () => {\r\n    // 实际登录逻辑会在这里实现，例如 API 调用\r\n    await init();\r\n    const res = await login({...loginForm.value, captcha: code.value});\r\n    if (res.status === \"fail\") {\r\n        ElMessage.warning(res.message);\r\n        return;\r\n    }\r\n    const token = res.data;\r\n    let strings = token.split(\".\"); //截取token，获取载体\r\n    var userinfo = JSON.parse(\r\n        decodeURIComponent(\r\n            escape(window.atob(strings[1].replace(/-/g, \"+\").replace(/_/g, \"/\")))\r\n        )\r\n    ); //解析，需要吧‘_’,'-'进行转换否则会无法解析\r\n    localStorage.setItem(\"token\", token);\r\n\r\n    store.commit(\"setUser\", {...JSON.parse(userinfo.sub), ...loginForm.value});\r\n    window.localStorage.setItem(\"showDialog\", true);\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(store.state.userInfo));\r\n    store.commit(\"changeUserPermissions\", \"admin\");\r\n    router.push(\"/admin/product-management\");\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-background {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    /* background: linear-gradient(135deg, #667eea 0%, #4995d7 100%); */\r\n    background: url('../views/login_bg.png') no-repeat center center;\r\n    background-size: cover;\r\n}\r\n\r\n.login-card {\r\n    width: 100%;\r\n    max-width: 360px;\r\n    padding: 40px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    color: #333;\r\n}\r\n\r\n.full-width {\r\n    width: 100%;\r\n}\r\n.input-field {\r\n    width: 100%;\r\n}\r\n.register-link {\r\n    text-align: center;\r\n    display: block;\r\n    color: #333;\r\n}\r\n</style>\r\n"]}]}