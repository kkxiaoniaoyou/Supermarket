{"remainingRequest":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductReservationDetailManagement.vue?vue&type=style&index=0&id=8d06fd2a&scoped=true&lang=css","dependencies":[{"path":"D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductReservationDetailManagement.vue","mtime":1716480842579},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1716113548474},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1716113543792},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1716113545439},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716113548707},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1716113543526}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWlkLW1hbmFnZW1lbnQtY29udGFpbmVyIHsNCiAgcGFkZGluZzogMzBweDsNCn0NCg0KLmVpZC1tYW5hZ2VtZW50LWNhcmQgew0KICB3aWR0aDogMTAwJTsNCn0NCg0KaDIgew0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KfQ0KDQouZGlhbG9nLWZvb3RlciB7DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KfQ0K"},{"version":3,"sources":["D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductReservationDetailManagement.vue"],"names":[],"mappings":";AA4JA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb;;AAEA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB","file":"D:/project/supermarket-jxc-sys-vue/src/views/admin/ProductReservationDetailManagement.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <el-container class=\"eid-management-container\">\r\n    <el-card class=\"eid-management-card\">\r\n      <h2>预约详情管理</h2>\r\n      <el-button type=\"primary\" @click=\"showDialog = true\">新增</el-button>\r\n      <el-table :data=\"list\" style=\"width: 100%; margin-top: 20px\">\r\n        <el-table-column prop=\"productName\" label=\"商品名称\"></el-table-column>\r\n        <el-table-column prop=\"CreateTime\" label=\"创建时间\"></el-table-column>\r\n        <el-table-column\r\n          prop=\"reservationQuantity\"\r\n          label=\"预约数量\"\r\n        ></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"scope\">\r\n            <el-button type=\"text\" @click=\"viewDetails(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n            <el-button type=\"text\" @click=\"del(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        class=\"pagination\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pager.pageNum\"\r\n        :page-sizes=\"[10, 20, 30, 40]\"\r\n        :page-size=\"pager.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"pager.total\"\r\n      />\r\n    </el-card>\r\n\r\n    <el-dialog title=\"预约详情\" v-model=\"showDialog\">\r\n      <el-form :model=\"selectedModel\" label-width=\"120px\">\r\n        <el-form-item label=\"商品\">\r\n          <el-select v-model=\"selectedModel.productName\">\r\n            <el-option\r\n              v-for=\"item in products\"\r\n              :key=\"item.id\"\r\n              :value=\"item.name\"\r\n              :label=\"item.name\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"预约数\" prop=\"reservationQuantity\">\r\n          <el-input-number\r\n            v-model=\"selectedModel.reservationQuantity\"\r\n          ></el-input-number>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit\">提交</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from \"vue\";\r\nimport * as api from \"@/api/ProductReservationDetail.js\";\r\nimport * as productapi from \"@/api/Product.js\";\r\n\r\nimport { useStore } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport upload from \"@/components/upload\";\r\nconst store = useStore();\r\nconst showDialog = ref(false);\r\nconst selectedModel = ref({});\r\nconst list = ref([\r\n  // 更多申请记录\r\n]);\r\nconst open = () => {\r\n  showDialog.value = true;\r\n};\r\nconst viewDetails = (item) => {\r\nconsole.log(item)\r\n  selectedModel.value = { ...item };\r\n  open();\r\n  // 实现查看申请详情的逻辑\r\n};\r\nconst cancel = () => {\r\n  showDialog.value = false;\r\n  selectedModel.value = {};\r\n};\r\nconst submit = async () => {\r\n  const fn = selectedModel.value.id\r\n    ? api.updateItem\r\n    : api.addItem;\r\n  const ProductReservationId = selectedModel.value.id\r\n    ? selectedModel.value.productReservationId\r\n    : null;\r\n  const { code, message } = await fn({\r\n    ...selectedModel.value,\r\n    ReservationQuantity: selectedModel.value.reservationQuantity,\r\n    ProductName: selectedModel.value.productName,\r\n    ProductReservationId,\r\n    CustomerId: selectedModel.value.customerId || 111,\r\n    SupplierId: selectedModel.value.supplierId || 111,\r\n    Id: selectedModel.value.id\r\n  });\r\n  if (code !== 200) {\r\n    ElMessage.warning(message);\r\n    return;\r\n  }\r\n  await getList();\r\n  cancel();\r\n};\r\nconst pager = ref({\r\n  pageNum: 1,\r\n  pageSize: 10,\r\n  total: 0,\r\n});\r\nconst handleSizeChange = (newSize) => {\r\n  pager.value.pageSize = newSize;\r\n  pager.value.pageNum = 1; // Reset to first page on size change\r\n  getList();\r\n};\r\n\r\nconst handleCurrentChange = (newPage) => {\r\n  pager.value.pageNum = newPage; // Reset to first page on size change\r\n  getList();\r\n};\r\nconst products = ref([]);\r\nconst getProducts = async () => {\r\n  const { data } = await productapi.getAllList();\r\n  products.value = data;\r\n  return data;\r\n};\r\nconst getList = async () => {\r\n  const {\r\n    pageNum,\r\n    pageSize,\r\n    list: arr,\r\n    total,\r\n  } = await api.getList({\r\n    ...pager.value,\r\n    params: {},\r\n  });\r\n  pager.value = {\r\n    pageNum,\r\n    pageSize,\r\n    total,\r\n  };\r\n  const data = await getProducts();\r\n  list.value = arr;\r\n};\r\nconst del = async ({ id }) => {\r\n  await api.delItem({ Id: id });\r\n  await getList();\r\n};\r\ngetList();\r\n</script>\r\n\r\n<style scoped>\r\n.eid-management-container {\r\n  padding: 30px;\r\n}\r\n\r\n.eid-management-card {\r\n  width: 100%;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>"]}]}