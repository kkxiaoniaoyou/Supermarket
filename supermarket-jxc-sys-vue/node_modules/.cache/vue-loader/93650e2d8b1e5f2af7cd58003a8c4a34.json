{"remainingRequest":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue?vue&type=template&id=26084dc2&scoped=true","dependencies":[{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue","mtime":1718599544311},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1716113543852},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716113548707},{"path":"D:\\project - 副本\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1716113543526}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogICAgPGRpdiBjbGFzcz0ibG9naW4tYmFja2dyb3VuZCI+DQogICAgICAgIA0KICAgICAgICA8ZWwtY2FyZCBjbGFzcz0ibG9naW4tY2FyZCI+DQogICAgICAgICAgICA8aDIgY2xhc3M9InRpdGxlIj7nmbvlvZXliLDmgqjnmoTotKbmiLc8L2gyPg0KICAgICAgICAgICAgPGVsLWZvcm0gcmVmPSJmb3JtIiA6bW9kZWw9ImxvZ2luRm9ybSIgQHN1Ym1pdC5wcmV2ZW50PSJoYW5kbGVMb2dpbiI+DQogICAgICAgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD0i55So5oi35ZCNIiBwcm9wPSJ1c2VybmFtZSIgbGFiZWwtd2lkdGg9IiI+DQogICAgICAgICAgICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPSJsb2dpbkZvcm0udXNlcm5hbWUiPjwvZWwtaW5wdXQ+DQogICAgICAgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+DQogICAgICAgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD0i5a+G56CBIiBwcm9wPSJwYXNzd29yZCI+DQogICAgICAgICAgICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPSJsb2dpbkZvcm0ucGFzc3dvcmQiIHR5cGU9InBhc3N3b3JkIj48L2VsLWlucHV0Pg0KICAgICAgICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPg0KDQogICAgICAgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD0i6KeS6ImyIj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZWwtcmFkaW8tZ3JvdXAgdi1tb2RlbD0ibG9naW5Gb3JtLnJvbGVJZCIgY2xhc3M9Im1sLTQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGVsLXJhZGlvIDp2YWx1ZT0iMSIgc2l6ZT0ibGFyZ2UiPueuoeeQhuWRmDwvZWwtcmFkaW8+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZWwtcmFkaW8gOnZhbHVlPSIwIiBzaXplPSJsYXJnZSI+5ZGY5belPC9lbC1yYWRpbz4NCiAgICAgICAgICAgICAgICAgICAgPC9lbC1yYWRpby1ncm91cD4NCg0KICAgICAgICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPg0KDQogICAgICAgICAgICAgICAgPGVsLWZvcm0taXRlbT4NCiAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiBjbGFzcz0iZnVsbC13aWR0aCIgdHlwZT0icHJpbWFyeSIgQGNsaWNrPSJoYW5kbGVMb2dpbiINCiAgICAgICAgICAgICAgICAgICAgPueZu+W9lQ0KICAgICAgICAgICAgICAgICAgICA8L2VsLWJ1dHRvbg0KICAgICAgICAgICAgICAgICAgICA+DQogICAgICAgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+DQogICAgICAgICAgICA8L2VsLWZvcm0+DQogICAgICAgIDwvZWwtY2FyZD4NCiAgICAgICAgDQogICAgPC9kaXY+DQo="},{"version":3,"sources":["D:\\project - 副本\\supermarket-jxc-sys-vue\\src\\views\\Login.vue"],"names":[],"mappings":";IACI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;gBAEd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;oBAEpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;gBAEpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;gBAEd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChE,CAAC,CAAC;oBACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACV;gBACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEb,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/project - 副本/supermarket-jxc-sys-vue/src/views/Login.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <div class=\"login-background\">\r\n        \r\n        <el-card class=\"login-card\">\r\n            <h2 class=\"title\">登录到您的账户</h2>\r\n            <el-form ref=\"form\" :model=\"loginForm\" @submit.prevent=\"handleLogin\">\r\n                <el-form-item label=\"用户名\" prop=\"username\" label-width=\"\">\r\n                    <el-input v-model=\"loginForm.username\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input v-model=\"loginForm.password\" type=\"password\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"角色\">\r\n\r\n                    <el-radio-group v-model=\"loginForm.roleId\" class=\"ml-4\">\r\n                        <el-radio :value=\"1\" size=\"large\">管理员</el-radio>\r\n                        <el-radio :value=\"0\" size=\"large\">员工</el-radio>\r\n                    </el-radio-group>\r\n\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button class=\"full-width\" type=\"primary\" @click=\"handleLogin\"\r\n                    >登录\r\n                    </el-button\r\n                    >\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from \"vue\";\r\nimport {useRouter} from \"vue-router\";\r\nimport {getCaptchaNbr, login} from \"@/api/user\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport {useStore} from \"vuex\";\r\n\r\nconst store = useStore();\r\nconst code = ref(\"\");\r\n\r\nasync function init() {\r\n    const {data} = await getCaptchaNbr();\r\n    code.value = data;\r\n}\r\n\r\ninit();\r\nconst router = useRouter();\r\nconst form = ref();\r\nconst loginForm = ref({\r\n    username: \"\",\r\n    password: \"\",\r\n    roleId: 1,\r\n});\r\nconst handleLogin = async () => {\r\n    // 实际登录逻辑会在这里实现，例如 API 调用\r\n    await init();\r\n    const res = await login({...loginForm.value, captcha: code.value});\r\n    if (res.status === \"fail\") {\r\n        ElMessage.warning(res.message);\r\n        return;\r\n    }\r\n    const token = res.data;\r\n    let strings = token.split(\".\"); //截取token，获取载体\r\n    var userinfo = JSON.parse(\r\n        decodeURIComponent(\r\n            escape(window.atob(strings[1].replace(/-/g, \"+\").replace(/_/g, \"/\")))\r\n        )\r\n    ); //解析，需要吧‘_’,'-'进行转换否则会无法解析\r\n    localStorage.setItem(\"token\", token);\r\n\r\n    store.commit(\"setUser\", {...JSON.parse(userinfo.sub), ...loginForm.value});\r\n    window.localStorage.setItem(\"showDialog\", true);\r\n    localStorage.setItem(\"userInfo\", JSON.stringify(store.state.userInfo));\r\n    store.commit(\"changeUserPermissions\", \"admin\");\r\n    router.push(\"/admin/product-management\");\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-background {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    /* background: linear-gradient(135deg, #667eea 0%, #4995d7 100%); */\r\n    background: url('../views/login_bg.png') no-repeat center center;\r\n    background-size: cover;\r\n}\r\n\r\n.login-card {\r\n    width: 100%;\r\n    max-width: 360px;\r\n    padding: 40px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    color: #333;\r\n}\r\n\r\n.full-width {\r\n    width: 100%;\r\n}\r\n.input-field {\r\n    width: 100%;\r\n}\r\n.register-link {\r\n    text-align: center;\r\n    display: block;\r\n    color: #333;\r\n}\r\n</style>\r\n"]}]}