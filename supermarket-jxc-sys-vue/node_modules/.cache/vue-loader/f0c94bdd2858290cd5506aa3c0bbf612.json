{"remainingRequest":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductManagement.vue?vue&type=style&index=0&id=10fa7d88&scoped=true&lang=css","dependencies":[{"path":"D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductManagement.vue","mtime":1716613306281},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1716113548474},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1716113543792},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1716113545439},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716113548707},{"path":"D:\\project\\supermarket-jxc-sys-vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1716113543526}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWlkLW1hbmFnZW1lbnQtY29udGFpbmVyIHsNCiAgcGFkZGluZzogMzBweDsNCn0NCg0KLmVpZC1tYW5hZ2VtZW50LWNhcmQgew0KICB3aWR0aDogMTAwJTsNCn0NCg0KaDIgew0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KfQ0KDQouZGlhbG9nLWZvb3RlciB7DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KfQ0K"},{"version":3,"sources":["D:\\project\\supermarket-jxc-sys-vue\\src\\views\\admin\\ProductManagement.vue"],"names":[],"mappings":";AA2JA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb;;AAEA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB","file":"D:/project/supermarket-jxc-sys-vue/src/views/admin/ProductManagement.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <el-container class=\"eid-management-container\">\r\n    <el-card class=\"eid-management-card\">\r\n      <h2>商品管理</h2>\r\n      <el-button type=\"primary\" @click=\"showDialog = true\">新增</el-button>\r\n      <el-table :data=\"list\" style=\"width: 100%; margin-top: 20px\">\r\n        <el-table-column prop=\"name\" label=\"商品名称\"></el-table-column>\r\n        <el-table-column prop=\"image\" label=\"图片\">\r\n          <template #default=\"scope\">\r\n            <el-image\r\n              style=\"width: 100px; height: 100px\"\r\n              :src=\"scope.row.image\"\r\n            ></el-image>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"costPrice\" label=\"进价\"></el-table-column>\r\n        <el-table-column prop=\"description\" label=\"介绍\"></el-table-column>\r\n        <el-table-column prop=\"expiryDate\" label=\"失效日期\"></el-table-column>\r\n\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"scope\">\r\n            <el-button type=\"text\" @click=\"viewDetails(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n            <el-button type=\"text\" @click=\"del(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        class=\"pagination\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pager.pageNum\"\r\n        :page-sizes=\"[10, 20, 30, 40]\"\r\n        :page-size=\"pager.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"pager.total\"\r\n      />\r\n    </el-card>\r\n\r\n    <el-dialog title=\"商品\" v-model=\"showDialog\">\r\n      <el-form :model=\"selectedModel\" label-width=\"120px\">\r\n        <el-form-item label=\"商品名称\" prop=\"name\">\r\n          <el-input v-model=\"selectedModel.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\" prop=\"image\">\r\n          <upload v-model=\"selectedModel.image\"></upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"description\">\r\n          <el-input v-model=\"selectedModel.description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"失效日期\" prop=\"expiryDate\">\r\n          <el-date-picker\r\n            v-model=\"selectedModel.expiryDate\"\r\n            type=\"datetime\"\r\n            value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"进价\" prop=\"costPrice\">\r\n          <el-input-number v-model=\"selectedModel.costPrice\"></el-input-number>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit\">提交</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from \"vue\";\r\nimport * as api from \"@/api/Product.js\";\r\nimport { useStore } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport upload from \"@/components/upload\";\r\nconst store = useStore();\r\nconst showDialog = ref(false);\r\nconst selectedModel = ref({});\r\nconst list = ref([\r\n  // 更多申请记录\r\n]);\r\nconst open = () => {\r\n  showDialog.value = true;\r\n};\r\nconst viewDetails = (item) => {\r\n  selectedModel.value = { ...item };\r\n  open();\r\n  // 实现查看申请详情的逻辑\r\n};\r\nconst cancel = () => {\r\n  showDialog.value = false;\r\n  selectedModel.value = {};\r\n};\r\nconst submit = async () => {\r\n  const fn = selectedModel.value.id ? api.updateItem : api.addItem;\r\n  const id = selectedModel.value.id ? selectedModel.value.id : null;\r\n  const { code, message } = await fn({\r\n    ...selectedModel.value,\r\n    id,\r\n    CostPrice: selectedModel.value.costPrice,\r\n    Description: selectedModel.value.description,\r\n    Id: selectedModel.value.id,\r\n    Image: selectedModel.value.image,\r\n    Name: selectedModel.value.name,\r\n    ExpiryDate: selectedModel.value.expiryDate,\r\n  });\r\n  if (code !== 200) {\r\n    ElMessage.warning(message);\r\n    return;\r\n  }\r\n  await getList();\r\n  cancel();\r\n};\r\nconst pager = ref({\r\n  pageNum: 1,\r\n  pageSize: 10,\r\n  total: 0,\r\n});\r\nconst handleSizeChange = (newSize) => {\r\n  pager.value.pageSize = newSize;\r\n  pager.value.pageNum = 1; // Reset to first page on size change\r\n  getList();\r\n};\r\n\r\nconst handleCurrentChange = (newPage) => {\r\n  pager.value.pageNum = newPage; // Reset to first page on size change\r\n  getList();\r\n};\r\nconst getList = async () => {\r\n  const {\r\n    pageNum,\r\n    pageSize,\r\n    list: arr,\r\n    total,\r\n  } = await api.getList({\r\n    ...pager.value,\r\n    params: {},\r\n  });\r\n\r\n  pager.value = {\r\n    pageNum,\r\n    pageSize,\r\n    total,\r\n  };\r\n  list.value = arr;\r\n};\r\nconst del = async ({ id }) => {\r\n  await api.delItem({ Id: id });\r\n  await getList();\r\n};\r\ngetList();\r\n</script>\r\n\r\n<style scoped>\r\n.eid-management-container {\r\n  padding: 30px;\r\n}\r\n\r\n.eid-management-card {\r\n  width: 100%;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>"]}]}